<div class="logs-table-container">
    <p-table [paginator]="false" [rows]="pagination.pageSize" [value]="logs" styleClass="p-datatable-sm">
        <ng-template pTemplate="header">
            <tr>
                <th (click)="onSort('timestamp')">
                    Timestamp
                    <i *ngIf="currentSortField === 'timestamp'" [class.pi-sort-amount-down]="!sortAscending"
                       [class.pi-sort-amount-up]="sortAscending"
                       class="pi"></i>
                </th>
                <th (click)="onSort('severity')">
                    Severity
                    <i *ngIf="currentSortField === 'severity'" [class.pi-sort-alpha-down]="!sortAscending"
                       [class.pi-sort-alpha-up]="sortAscending"
                       class="pi"></i>
                </th>
                <th (click)="onSort('serviceName')">
                    Service
                    <i *ngIf="currentSortField === 'serviceName'" [class.pi-sort-alpha-down]="!sortAscending"
                       [class.pi-sort-alpha-up]="sortAscending"
                       class="pi"></i>
                </th>
                <th>Message</th>
                <th>Trace ID</th>
                <th *ngFor="let key of getAdditionalFields()">{{ key }}</th>
            </tr>
        </ng-template>
        <ng-template let-log pTemplate="body">
            <tr>
                <td>{{ log.timestamp | date : 'medium' }}</td>
                <td>
                    <p-tag [severity]="getSeverityClass(log.severity)"
                           [value]="log.severity"></p-tag>
                </td>
                <td>{{ log.serviceName }}</td>
                <td class="message-cell">{{ log.message }}</td>
                <td>{{ log.traceId }}</td>
                <td *ngFor="let key of getAdditionalFields()">
                    {{ log.additionalFields?.[key] || '-' }}
                </td>
            </tr>
        </ng-template>
    </p-table>

    <div class="pagination-controls">
        <button (click)="onPageChange(pagination.page - 1)" [disabled]="!pagination.hasPreviousPage"
                icon="pi pi-chevron-left"
                pButton
                type="button"></button>

        <span class="page-info">
            Page {{ pagination.page }} of {{ pagination.totalPages }}
        </span>

        <button (click)="onPageChange(1)" [disabled]="!pagination.hasNextPage"
                icon="pi pi-chevron-right"
                pButton
                type="button"></button>
    </div>
</div>
