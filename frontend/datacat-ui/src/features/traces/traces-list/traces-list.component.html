<div class="logs-table-container">
    <div class="table-scroll">
        <p-table
                [paginator]="false"
                [value]="traces"
                styleClass="ResultList">
            <ng-template pTemplate="header">
                <tr>
                    <th>Duration</th>
                    <th>Trace</th>
                    <th>Spans</th>
                    <th>Services</th>
                    <th>Time</th>
                    <th>Details</th>
                </tr>
            </ng-template>
            <ng-template let-trace pTemplate="body">
                <tr>
                    <td>
                        <div [style.width.%]="(getCurrentDuration(trace) / getMaxDuration()) * 100"
                             class="duration-bar"></div>
                        <span>{{ getCurrentDuration(trace) }}ms</span>
                    </td>
                    <td><a [routerLink]="['/trace', trace.traceId]">{{ trace.service }}: {{ trace.operation }}
                        <small>{{ trace.traceId | slice:0:8 }}</small></a></td>
                    <td>
                        <p-tag [value]="trace.spanCount + ' Span' + (trace.spanCount>1?'s':'')"></p-tag>
                    </td>
                    <td>
                        @for (svc of trace.serviceTags; track svc) {
                            <p-tag [styleClass]="'service-tag'" [value]="svc"></p-tag>
                        }
                    </td>
                    <td>{{ trace.timestamp | date:'MMM d, y, h:mm:ss a' }}<br><small>{{ trace.timestamp }}</small>
                    </td>
                    <td>
                        <p-button (click)="showDetails(trace)" class="p-button-text"
                                  icon="pi pi-info-circle"></p-button>
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</div>
