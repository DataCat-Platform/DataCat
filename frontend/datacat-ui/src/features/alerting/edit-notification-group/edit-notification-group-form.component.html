@switch (loadingState) {
  @case (LoadingState.Loading) {
    <div class="group-name">
      <p class="text-secondary">Group name</p>
      <p-skeleton width="20rem" height="1.34rem" />
    </div>
    <form class="form">
      <p class="text-secondary">Channels</p>
      <p-button label="Add channel" severity="secondary" />
      <p-skeleton width="20rem" height="1.34rem" />
      <p-skeleton width="20rem" height="1.34rem" />
      <p-skeleton width="20rem" height="1.34rem" />
    </form>
  }
  @case (LoadingState.Error) {
    <p-tag value="Unable to load edit form" severity="secondary" />
  }
  @case (LoadingState.Success) {
    <div class="group-name">
      <p class="text-secondary">Group name</p>
      <p>{{ groupName }}</p>
    </div>

    <!-- <form class="form" [formGroup]="form">
      <p class="text-secondary">Channels</p>
      <p-button
        label="Add channel"
        severity="secondary"
        (onClick)="showChannelCreationDialog()"
        [disabled]="form.disabled"
      />

      @if (
        emailChannels.length +
          webhookChannels.length +
          telegramChannels.length ===
        0
      ) {
        <p-tag value="No channels yet" severity="info" />
      }

      <div class="channels-box">
        @if (emailChannels.length !== 0) {
          <ng-container formArrayName="emailChannels">
            @for (control of emailChannels.controls; track $index) {
              <div [formGroup]="control" class="channel-form">
                <i class="pi pi-envelope text-secondary"></i>
                <input
                  pInputText
                  formControlName="address"
                  placeholder="Email address"
                />
                <p-button
                  [text]="true"
                  icon="pi pi-trash text-secondary"
                  severity="secondary"
                  (onClick)="deleteEmailChannel($index)"
                />
              </div>
            }
          </ng-container>
        }

        @if (telegramChannels.length !== 0) {
          <ng-container formArrayName="telegramChannels">
            @for (control of telegramChannels.controls; track $index) {
              <div [formGroup]="control" class="channel-form">
                <i class="pi pi-telegram text-secondary"></i>
                <input
                  pInputText
                  formControlName="username"
                  placeholder="Telegram username"
                />
                <p-button
                  [text]="true"
                  icon="pi pi-trash text-secondary"
                  severity="secondary"
                  (onClick)="deleteTelegramChannel($index)"
                />
              </div>
            }
          </ng-container>
        }

        @if (webhookChannels.length !== 0) {
          <ng-container formArrayName="webhookChannels">
            @for (control of webhookChannels.controls; track $index) {
              <div [formGroup]="control" class="channel-form">
                <i class="pi pi-link text-secondary"></i>
                <input pInputText formControlName="url" placeholder="Url" />
                <p-button
                  [text]="true"
                  icon="pi pi-trash text-secondary"
                  severity="secondary"
                  (onClick)="deleteWebhookChannel($index)"
                />
              </div>
            }
          </ng-container>
        }
      </div>
    </form> -->
  }
}

<p-dialog
  header="Add notification channel"
  [(visible)]="isChannelCreationDialogVisible"
  [modal]="true"
>
  <form class="dialog" [formGroup]="addChannelForm">
    <p-select
      [options]="drivers"
      formControlName="driver"
      placeholder="Select driver"
    />
    <div class="dialog__actions">
      <p-button
        severity="secondary"
        label="Cancel"
        (onClick)="hideChannelCreationDialog()"
      />
      <p-button label="Add" (onClick)="addChannel()" />
    </div>
  </form>
</p-dialog>
