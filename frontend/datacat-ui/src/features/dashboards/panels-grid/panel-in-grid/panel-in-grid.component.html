<p-panel [style]="{ height: '100%' }">
  <ng-template pTemplate="header">
    <div class="header">
      <p>{{ _panel?.title || 'Unnamed panel' }}</p>
      <div>
        <p-button
          icon="pi pi-eye"
          [text]="true"
          severity="secondary"
          class="text-secondary"
          (onClick)="showDialog()"
        />
        <p-button
          icon="pi pi-pencil"
          [text]="true"
          severity="secondary"
          class="text-secondary"
          (onClick)="editPanel()"
        />
      </div>
    </div>
  </ng-template>
  <div class="container">
    @if (isError) {
      <p class="text-secondary">Loading error</p>
    } @else {
      <datacat-panel-vizualization
        [data]="data"
        [visualizationType]="_panel?.visualizationType"
        [visualizationSettings]="_panel?.visualizationSettings"
      />
    }
  </div>
</p-panel>

<p-dialog
  [modal]="true"
  [(visible)]="isDialogShown"
  appendTo="body"
  [header]="_panel?.title"
>
  <div class="dialog">
    <div class="attr">
      <p>Query</p>
      <textarea pTextarea [disabled]="true">{{ _panel?.query }}</textarea>
    </div>
    <p-divider></p-divider>
    <datacat-panel-vizualization
      [data]="data"
      [visualizationType]="_panel?.visualizationType"
      [visualizationSettings]="_panel?.visualizationSettings"
    />
  </div>
</p-dialog>
